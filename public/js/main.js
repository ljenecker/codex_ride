// var map = L.map('mapid').setView([-33.910369,18.421682], 13);
//
// L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibGplbmVja2VyIiwiYSI6ImNqb2o1cnU1NjAxbHkzcG1taWt3NGI1ZWYifQ.4yfeyjsw4JrgVHc1R207Rw', {
//     attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
//     Zoom: 18,
//     id: 'mapbox.streets',
//     accessToken: 'your.mapbox.access.token'
// }).addTo(map);
//
// map.locate({setView: true, Zoom: 14});
//
// function onLocationFound(e) {
//     var radius = e.accuracy / 2;
//
//     L.marker(e.latlng).addTo(map)
//         .bindPopup("You are within " + radius + " meters from this point").openPopup();
//
//     L.circle(e.latlng, radius).addTo(map);
//
//     var myLines = [{
//         "type": "LineString",
//         "coordinates": [[18.421682,-33.910333], [18.495331,-34.045113], [18.490362,-34.052067]]
//     }];
//
//     var myStyle = {
//         "color": "#ff7800",
//         "weight": 5,
//         "opacity": 0.65
//     };
//
//     L.geoJSON(myLines, {
//         style: myStyle
//     }).addTo(map);
// }
//
// map.on('locationfound', onLocationFound);



// var map = L.map('mapid').fitWorld();
//
// L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibGplbmVja2VyIiwiYSI6ImNqb2o1cnU1NjAxbHkzcG1taWt3NGI1ZWYifQ.4yfeyjsw4JrgVHc1R207Rw', {
//     attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
//     Zoom: 18
// }).addTo(map);
//
// map.locate({setView: true, Zoom: 16});
//
// function onLocationFound(e) {
//     var radius = e.accuracy / 2;
//
//     L.marker(e.latlng).addTo(map)
//         .bindPopup("You are within " + radius + " meters from this point").openPopup();
//
//     L.circle(e.latlng, radius).addTo(map);
// }
//
// map.on('locationfound', onLocationFound);



var map = L.map('mapid').fitWorld();

L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
    Zoom: 18,
    attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, ' +
        '<a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
        'Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
    id: 'mapbox.streets'
}).addTo(map);

function onLocationFound(e) {

    var radius = 300;
    // e.latling = [-33.89552,18.50476];
    L.marker([-33.89552,18.50476]).addTo(map).bindPopup("You are at this point").openPopup();






    var greenIcon = L.icon({
    iconUrl: '../img/train.jpg',


    iconSize:     [30, 30], // size of the icon

});

    L.marker([-33.897, 18.51737], {icon: greenIcon}).addTo(map).bindPopup("ETA 17min");;

    L.marker([-33.944339, 18.535295]).addTo(map);

    // var marker = L.marker([18.490362, -34.052067]).addTo(mymap);

    L.circle([-33.89552,18.50476], radius).addTo(map);

    var myLines = [{
        "type": "LineString",
        "coordinates": [
            [18.50476, -33.89552],
            [18.50411, -33.89617],
            [18.50411, -33.89617],
            [18.50471, -33.89662],
            [18.50476, -33.89672],
            [18.50476, -33.89672],
            [18.50478, -33.89677],
            [18.50488, -33.89683],
            [18.50488, -33.89683],
            [18.50481, -33.89685],
            [18.50454, -33.89711],
            [18.50451, -33.89717],
            [18.50455, -33.89731],
            [18.50455, -33.89731],
            [18.50668, -33.89877],
            [18.50853, -33.89994],
            [18.50875, -33.89997],
            [18.50875, -33.89997],
            [18.50876, -33.9],
            [18.50876, -33.9],
            [18.5089, -33.90015],
            [18.5089, -33.90015],
            [18.50888, -33.90017],
            [18.50888, -33.90017],
            [18.50891, -33.9002],
            [18.51035, -33.90109],
            [18.51035, -33.90109],
            [18.51063, -33.90129],
            [18.51074, -33.9013],
            [18.51088, -33.90126],
            [18.51124, -33.90106],
            [18.51124, -33.90106],
            [18.51149, -33.90134]
        ]

    }];

    var myStyle = {
        "color": "#000",
        "weight": 5,
        "opacity": 0.9
    };

    L.geoJSON(myLines, {
        style: myStyle
    }).addTo(map);







    myLines = [{
        "type": "LineString",
        "coordinates": [
            [18.51148, -33.90133],
            [18.51118, -33.90149],
            [18.5111, -33.90153],
            [18.51012, -33.90209],
            [18.50927, -33.90255],
            [18.50877, -33.90285],
            [18.50821, -33.90328],
            [18.50779, -33.90367],
            [18.50747, -33.90396],
            [18.50669, -33.90468],
            [18.50505, -33.90619],
            [18.50415, -33.90702],
            [18.50293, -33.90815],
            [18.50195, -33.90902],
            [18.50116, -33.90978],
            [18.50001, -33.91085],
            [18.49899, -33.91192],
            [18.49859, -33.91234],
            [18.49778, -33.9131],
            [18.49778, -33.9131],
            [18.49778, -33.9131],
            [18.49773, -33.91314],
            [18.49744, -33.91341],
            [18.49681, -33.91397],
            [18.49569, -33.91471],
            [18.49522, -33.91498],
            [18.49474, -33.91519],
            [18.49412, -33.9154],
            [18.49274, -33.91574],
            [18.49181, -33.91596],
            [18.49047, -33.91628],
            [18.48893, -33.91672],
            [18.4887, -33.91677],
            [18.48849, -33.91682],
            [18.48829, -33.91687],
            [18.48771, -33.91702],
            [18.48574, -33.91747],
            [18.4842, -33.91778],
            [18.48358, -33.91793],
            [18.48331, -33.918],
            [18.4826, -33.91817],
            [18.48206, -33.9183],
            [18.48148, -33.91844],
            [18.48065, -33.91863],
            [18.48043, -33.91868],
            [18.48016, -33.91874],
            [18.47994, -33.91879],
            [18.47966, -33.91886],
            [18.47948, -33.9189],
            [18.47923, -33.91898],
            [18.47909, -33.91902],
            [18.47897, -33.91907],
            [18.47847, -33.91925],
            [18.4781, -33.91941],
            [18.47675, -33.91997],
            [18.47674, -33.91998]
        ]


    }];

    myStyle = {
        "color": "#ff0000",
        "weight": 5,
        "opacity": 0.9
    };

    L.geoJSON(myLines, {
        style: myStyle
    }).addTo(map);









    myLines = [{
        "type": "LineString",
        "coordinates": [
            [
                18.47674,
                -33.91998
            ],
            [
                18.47675,
                -33.91997
            ],
            [
                18.4781,
                -33.91941
            ],
            [
                18.47847,
                -33.91925
            ],
            [
                18.47897,
                -33.91907
            ],
            [
                18.47909,
                -33.91902
            ],
            [
                18.47923,
                -33.91898
            ],
            [
                18.47948,
                -33.9189
            ],
            [
                18.47966,
                -33.91886
            ],
            [
                18.47994,
                -33.91879
            ],
            [
                18.48016,
                -33.91874
            ],
            [
                18.48043,
                -33.91868
            ],
            [
                18.48051,
                -33.91866
            ],
            [
                18.48093,
                -33.91848
            ],
            [
                18.48099,
                -33.91847
            ],
            [
                18.48114,
                -33.91843
            ],
            [
                18.48131,
                -33.91841
            ],
            [
                18.48212,
                -33.91832
            ],
            [
                18.48289,
                -33.91814
            ],
            [
                18.48393,
                -33.91788
            ],
            [
                18.4841,
                -33.91784
            ],
            [
                18.48413,
                -33.91783
            ],
            [
                18.48421,
                -33.91782
            ],
            [
                18.48574,
                -33.91747
            ],
            [
                18.48771,
                -33.91702
            ],
            [
                18.48829,
                -33.91687
            ],
            [
                18.48849,
                -33.91682
            ],
            [
                18.4887,
                -33.91677
            ],
            [
                18.48893,
                -33.91672
            ],
            [
                18.48933,
                -33.91666
            ],
            [
                18.48948,
                -33.91664
            ],
            [
                18.48994,
                -33.91655
            ],
            [
                18.49063,
                -33.91644
            ],
            [
                18.49168,
                -33.91628
            ],
            [
                18.49238,
                -33.91623
            ],
            [
                18.49315,
                -33.91625
            ],
            [
                18.49401,
                -33.91633
            ],
            [
                18.4942,
                -33.91636
            ],
            [
                18.4948,
                -33.91646
            ],
            [
                18.49557,
                -33.91668
            ],
            [
                18.49638,
                -33.91699
            ],
            [
                18.49735,
                -33.91745
            ],
            [
                18.49827,
                -33.91793
            ],
            [
                18.49926,
                -33.91842
            ],
            [
                18.50001,
                -33.91884
            ],
            [
                18.50039,
                -33.91907
            ],
            [
                18.50074,
                -33.91934
            ],
            [
                18.50131,
                -33.91984
            ],
            [
                18.50167,
                -33.9202
            ],
            [
                18.50182,
                -33.92036
            ],
            [
                18.50188,
                -33.92042
            ],
            [
                18.50218,
                -33.9207
            ],
            [
                18.5025,
                -33.92109
            ],
            [
                18.50268,
                -33.92151
            ],
            [
                18.50286,
                -33.92194
            ],
            [
                18.50299,
                -33.92217
            ],
            [
                18.50324,
                -33.92247
            ],
            [
                18.50346,
                -33.92267
            ],
            [
                18.50362,
                -33.92276
            ],
            [
                18.50382,
                -33.92289
            ],
            [
                18.50411,
                -33.923
            ],
            [
                18.50446,
                -33.92311
            ],
            [
                18.5049,
                -33.92317
            ],
            [
                18.50565,
                -33.92318
            ],
            [
                18.50579,
                -33.92317
            ],
            [
                18.5059,
                -33.92316
            ],
            [
                18.50616,
                -33.92316
            ],
            [
                18.50635,
                -33.92314
            ],
            [
                18.50663,
                -33.92314
            ],
            [
                18.5067,
                -33.92313
            ],
            [
                18.50677,
                -33.92313
            ],
            [
                18.50706,
                -33.9231
            ],
            [
                18.50719,
                -33.92308
            ],
            [
                18.50736,
                -33.92305
            ],
            [
                18.5075,
                -33.92303
            ],
            [
                18.50764,
                -33.923
            ],
            [
                18.50821,
                -33.9229
            ],
            [
                18.51008,
                -33.92267
            ],
            [
                18.51374,
                -33.9222
            ],
            [
                18.51374,
                -33.9222
            ],
            [
                18.51389,
                -33.92218
            ],
            [
                18.51465,
                -33.9221
            ],
            [
                18.51489,
                -33.9221
            ],
            [
                18.51492,
                -33.9221
            ],
            [
                18.51528,
                -33.92212
            ],
            [
                18.51547,
                -33.92215
            ],
            [
                18.51568,
                -33.92219
            ],
            [
                18.51609,
                -33.92231
            ],
            [
                18.51642,
                -33.92243
            ],
            [
                18.51676,
                -33.92263
            ],
            [
                18.51697,
                -33.92276
            ],
            [
                18.51713,
                -33.92289
            ],
            [
                18.5174,
                -33.92316
            ],
            [
                18.51759,
                -33.92335
            ],
            [
                18.5177,
                -33.92349
            ],
            [
                18.51778,
                -33.92358
            ],
            [
                18.51811,
                -33.924
            ],
            [
                18.51904,
                -33.92518
            ],
            [
                18.52094,
                -33.92751
            ],
            [
                18.52116,
                -33.92779
            ],
            [
                18.52136,
                -33.9281
            ],
            [
                18.52144,
                -33.92825
            ],
            [
                18.5215,
                -33.92835
            ],
            [
                18.52178,
                -33.9289
            ],
            [
                18.52201,
                -33.92938
            ],
            [
                18.52217,
                -33.92982
            ],
            [
                18.52223,
                -33.92997
            ],
            [
                18.52227,
                -33.93006
            ],
            [
                18.52231,
                -33.93014
            ],
            [
                18.52238,
                -33.93026
            ],
            [
                18.52246,
                -33.93043
            ],
            [
                18.52258,
                -33.93068
            ],
            [
                18.52273,
                -33.93096
            ],
            [
                18.52282,
                -33.93125
            ],
            [
                18.52287,
                -33.93144
            ],
            [
                18.52292,
                -33.93168
            ],
            [
                18.52293,
                -33.93195
            ],
            [
                18.52293,
                -33.93209
            ],
            [
                18.52292,
                -33.93225
            ],
            [
                18.52289,
                -33.93275
            ],
            [
                18.52285,
                -33.93334
            ],
            [
                18.52283,
                -33.93365
            ],
            [
                18.52281,
                -33.93417
            ],
            [
                18.52284,
                -33.93444
            ],
            [
                18.52287,
                -33.93465
            ],
            [
                18.52293,
                -33.93492
            ],
            [
                18.523,
                -33.93516
            ],
            [
                18.52311,
                -33.93541
            ],
            [
                18.52316,
                -33.9355
            ],
            [
                18.52328,
                -33.93573
            ],
            [
                18.52344,
                -33.93597
            ],
            [
                18.52362,
                -33.9362
            ],
            [
                18.52384,
                -33.93644
            ],
            [
                18.5241,
                -33.93666
            ],
            [
                18.52433,
                -33.93683
            ],
            [
                18.52456,
                -33.93698
            ],
            [
                18.52479,
                -33.93712
            ],
            [
                18.52488,
                -33.93717
            ],
            [
                18.52524,
                -33.93734
            ],
            [
                18.52574,
                -33.93753
            ],
            [
                18.52617,
                -33.93768
            ],
            [
                18.52729,
                -33.93806
            ],
            [
                18.52819,
                -33.93844
            ],
            [
                18.53001,
                -33.93905
            ]
        ]


    }];

    myStyle = {
        "color": "#0000FF",
        "weight": 5,
        "opacity": 0.9
    };

    L.geoJSON(myLines, {
        style: myStyle
    }).addTo(map);

































    myLines = [{
       "type": "LineString",
       "coordinates": [ [ 18.52948,-33.93967 ],
  [ 18.52945,-33.93979 ],
  [ 18.52948,-33.93989 ],
  [ 18.52948,-33.93989 ],
  [ 18.52968,-33.93989 ],
  [ 18.53077,-33.94025 ],
  [ 18.53093,-33.94034 ],
  [ 18.53097,-33.94045 ],
  [ 18.53092,-33.94248 ],
  [ 18.53092,-33.94248 ],
  [ 18.53296,-33.94254 ],
  [ 18.53296,-33.94254 ],
  [ 18.53295,-33.94334 ],
  [ 18.53295,-33.94334 ],
  [ 18.53415,-33.94333 ],
  [ 18.53415,-33.94333 ],
  [ 18.53415,-33.94318 ],
  [ 18.53415,-33.94318 ],
  [ 18.5353,-33.94319 ],
  [ 18.5353,-33.94319 ],
  [ 18.53529,-33.94434 ] ]



   }];

    myStyle = {
       "color": "#000",
       "weight": 5,
       "opacity": 0.9
   };

   L.geoJSON(myLines, {
       style: myStyle
   }).addTo(map);















   myLines = [{
      "type": "LineString",
      "coordinates": [
                            [
                                18.52855,
                                -33.89478
                            ],
                            [
                                18.52756,
                                -33.89495
                            ],
                            [
                                18.5271,
                                -33.89501
                            ],
                            [
                                18.52686,
                                -33.89503
                            ],
                            [
                                18.52653,
                                -33.89504
                            ],
                            [
                                18.52624,
                                -33.89503
                            ],
                            [
                                18.52589,
                                -33.89499
                            ],
                            [
                                18.52574,
                                -33.89497
                            ],
                            [
                                18.52532,
                                -33.89492
                            ],
                            [
                                18.52484,
                                -33.89487
                            ],
                            [
                                18.5246,
                                -33.89484
                            ],
                            [
                                18.52415,
                                -33.89479
                            ],
                            [
                                18.52357,
                                -33.89471
                            ],
                            [
                                18.52339,
                                -33.89469
                            ],
                            [
                                18.52318,
                                -33.89468
                            ],
                            [
                                18.52288,
                                -33.89468
                            ],
                            [
                                18.52281,
                                -33.89468
                            ],
                            [
                                18.5226,
                                -33.89468
                            ],
                            [
                                18.52236,
                                -33.89468
                            ],
                            [
                                18.52217,
                                -33.89469
                            ],
                            [
                                18.52199,
                                -33.8947
                            ],
                            [
                                18.52177,
                                -33.89473
                            ],
                            [
                                18.52158,
                                -33.89476
                            ],
                            [
                                18.52129,
                                -33.89481
                            ],
                            [
                                18.52101,
                                -33.89487
                            ],
                            [
                                18.5208,
                                -33.89492
                            ],
                            [
                                18.52067,
                                -33.89496
                            ],
                            [
                                18.5206,
                                -33.89498
                            ],
                            [
                                18.52033,
                                -33.89507
                            ],
                            [
                                18.52006,
                                -33.89516
                            ],
                            [
                                18.51981,
                                -33.89526
                            ],
                            [
                                18.51953,
                                -33.89541
                            ],
                            [
                                18.51928,
                                -33.89555
                            ],
                            [
                                18.5191,
                                -33.89566
                            ],
                            [
                                18.519,
                                -33.89572
                            ],
                            [
                                18.51879,
                                -33.89586
                            ],
                            [
                                18.51848,
                                -33.8961
                            ],
                            [
                                18.51809,
                                -33.89638
                            ],
                            [
                                18.51774,
                                -33.89666
                            ],
                            [
                                18.51737,
                                -33.897
                            ],
                            [
                                18.51655,
                                -33.89781
                            ],
                            [
                                18.5162,
                                -33.89816
                            ],
                            [
                                18.51584,
                                -33.89852
                            ],
                            [
                                18.51563,
                                -33.89873
                            ],
                            [
                                18.51524,
                                -33.89908
                            ],
                            [
                                18.51487,
                                -33.89941
                            ],
                            [
                                18.51426,
                                -33.89981
                            ],
                            [
                                18.5134,
                                -33.90024
                            ],
                            [
                                18.51235,
                                -33.90085
                            ],
                            [
                                18.51148,
                                -33.90133
                            ]
                        ]



  }];

   myStyle = {
      "color": "#00ff00",
      "weight": 5,
      "opacity": 0.9
  };

  L.geoJSON(myLines, {
      style: myStyle
  }).addTo(map);




}

function onLocationError(e) {
    alert(e.message);
}

map.on('locationfound', onLocationFound);
map.on('locationerror', onLocationError);

map.locate({
    setView: true,
    Zoom: 16
});
